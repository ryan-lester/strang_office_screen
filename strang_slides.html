<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strang Slideshow - Synced (81 Slides)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            width: 100%; 
            height: 100vh; 
            overflow: hidden;
            background: #000;
        }

        .slide {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* No transition - Instant Cut */
            opacity: 0;
            transition: none;
            z-index: 1;
            /* Optimization to prevent painting issues */
            will-change: opacity;
        }

        .slide.active {
            opacity: 1;
            z-index: 2;
        }
    </style>
</head>
<body>

    <img id="slot-1" class="slide" src="" alt="">
    <img id="slot-2" class="slide" src="" alt="">

    <script>
        // CONFIGURATION -----------------------------------------
        
        const path = 'slides/'; 
        const slideDuration = 3000; // 3 Seconds per slide

        const slides = [
            'Strang Foyer_01.jpg', 'Strang Foyer_02.jpg', 'Strang Foyer_03.jpg', 
            'Strang Foyer_04.jpg', 'Strang Foyer_05.jpg', 'Strang Foyer_06.jpg', 
            'Strang Foyer_07.jpg', 'Strang Foyer_08.jpg', 'Strang Foyer_09.jpg', 
            'Strang Foyer_10.jpg', 'Strang Foyer_11.jpg', 'Strang Foyer_12.jpg', 
            'Strang Foyer_13.jpg', 'Strang Foyer_14.jpg', 'Strang Foyer_15.jpg', 
            'Strang Foyer_16.jpg', 'Strang Foyer_17.jpg', 'Strang Foyer_18.jpg', 
            'Strang Foyer_19.jpg', 'Strang Foyer_20.jpg', 'Strang Foyer_21.jpg', 
            'Strang Foyer_22.jpg', 'Strang Foyer_23.jpg', 'Strang Foyer_24.jpg', 
            'Strang Foyer_25.jpg', 'Strang Foyer_26.jpg', 'Strang Foyer_27.jpg', 
            'Strang Foyer_28.jpg', 'Strang Foyer_29.jpg', 'Strang Foyer_30.jpg', 
            'Strang Foyer_31.jpg', 'Strang Foyer_32.jpg', 'Strang Foyer_33.jpg', 
            'Strang Foyer_34.jpg', 'Strang Foyer_35.jpg', 'Strang Foyer_36.jpg', 
            'Strang Foyer_37.jpg', 'Strang Foyer_38.jpg', 'Strang Foyer_39.jpg', 
            'Strang Foyer_40.jpg', 'Strang Foyer_41.jpg', 'Strang Foyer_42.jpg', 
            'Strang Foyer_43.jpg', 'Strang Foyer_44.jpg', 'Strang Foyer_45.jpg', 
            'Strang Foyer_46.jpg', 'Strang Foyer_47.jpg', 'Strang Foyer_48.jpg', 
            'Strang Foyer_49.jpg', 'Strang Foyer_50.jpg', 'Strang Foyer_51.jpg', 
            'Strang Foyer_52.jpg', 'Strang Foyer_53.jpg', 'Strang Foyer_54.jpg', 
            'Strang Foyer_55.jpg', 'Strang Foyer_56.jpg', 'Strang Foyer_57.jpg', 
            'Strang Foyer_58.jpg', 'Strang Foyer_59.jpg', 'Strang Foyer_60.jpg', 
            'Strang Foyer_61.jpg', 'Strang Foyer_62.jpg', 'Strang Foyer_63.jpg', 
            'Strang Foyer_64.jpg', 'Strang Foyer_65.jpg', 'Strang Foyer_66.jpg', 
            'Strang Foyer_67.jpg', 'Strang Foyer_68.jpg', 'Strang Foyer_69.jpg', 
            'Strang Foyer_70.jpg', 'Strang Foyer_71.jpg', 'Strang Foyer_72.jpg', 
            'Strang Foyer_73.jpg', 'Strang Foyer_74.jpg', 'Strang Foyer_75.jpg', 
            'Strang Foyer_76.jpg', 'Strang Foyer_77.jpg', 'Strang Foyer_78.jpg', 
            'Strang Foyer_79.jpg', 'Strang Foyer_80.jpg', 'Strang Foyer_81.jpg'
        ];

        // -------------------------------------------------------

        let currentIndex = -1; 
        let activeSlot = 1;
        
        const img1 = document.getElementById('slot-1');
        const img2 = document.getElementById('slot-2');

        // CACHE SYSTEM
        // Keeps track of images we have already requested to load
        const preloadCache = new Set();

        function preloadImage(index) {
            // Wrap around if at the end of the list
            if (index >= slides.length) index = index % slides.length;
            
            if (!preloadCache.has(index)) {
                const img = new Image();
                img.src = path + slides[index];
                preloadCache.add(index);
            }
        }

        function getSyncedIndex() {
            // WORLD CLOCK LOGIC
            const now = Date.now();
            
            // Just divide time by duration and modulo by total slides
            // This is safer math for long uptimes
            const globalTick = Math.floor(now / slideDuration);
            return globalTick % slides.length;
        }

        function updateSlide() {
            const targetIndex = getSyncedIndex();

            // Preload the NEXT 5 images aggressively
            // This ensures they are in browser memory before we need them
            for (let i = 1; i <= 5; i++) {
                preloadImage(targetIndex + i);
            }

            if (targetIndex !== currentIndex) {
                
                const nextImageSrc = path + slides[targetIndex];
                const currentImg = activeSlot === 1 ? img1 : img2;
                const nextImg = activeSlot === 1 ? img2 : img1;

                // Set source
                nextImg.src = nextImageSrc;
                
                // Swap Active Classes
                nextImg.classList.add('active');
                currentImg.classList.remove('active');

                // Update Logic
                activeSlot = activeSlot === 1 ? 2 : 1;
                currentIndex = targetIndex;
            }

            requestAnimationFrame(updateSlide);
        }

        // Kickoff
        requestAnimationFrame(updateSlide);
    </script>

</body>
</html>
