<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strang Slideshow - Synced (81 Slides)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            width: 100%; 
            height: 100vh; 
            overflow: hidden;
            background: #000;
        }

        .slide {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            /* 1.5s Crossfade */
            transition: opacity 1.5s ease-in-out; 
            z-index: 1;
            will-change: opacity;
        }

        .slide.active {
            opacity: 1;
            z-index: 2;
        }
    </style>
</head>
<body>

    <img id="slot-1" class="slide" src="" alt="">
    <img id="slot-2" class="slide" src="" alt="">

    <script>
        
        const path = 'slides/';
        const slideDuration = 3000; // 3 Seconds per slide
        const totalSlides = 81;     // Set this to 81

        
        const slides = [];
        for (let i = 1; i <= totalSlides; i++) {
            const num = i < 10 ? '0' + i : i;
            slides.push(`Strang Foyer_${num}.jpg`);
        }

        // -------------------------------------------------------

        let currentIndex = -1; 
        let activeSlot = 1;
        
        const img1 = document.getElementById('slot-1');
        const img2 = document.getElementById('slot-2');

        function getSyncedIndex() {
            // THE WORLD CLOCK LOGIC
            // 1. Get current time in ms
            const now = Date.now();
            
            const totalLoopDuration = slides.length * slideDuration;
            
            const loopPosition = now % totalLoopDuration;
            
            return Math.floor(loopPosition / slideDuration);
        }

        function updateSlide() {
            const targetIndex = getSyncedIndex();

            if (targetIndex !== currentIndex) {
                
                const nextImageSrc = path + slides[targetIndex];

                const currentImg = activeSlot === 1 ? img1 : img2;
                const nextImg = activeSlot === 1 ? img2 : img1;

                // Load and show next image
                nextImg.src = nextImageSrc;
                
                // Force active class (Browser cache handles speed)
                nextImg.classList.add('active');
                currentImg.classList.remove('active');

                // Update state
                activeSlot = activeSlot === 1 ? 2 : 1;
                currentIndex = targetIndex;
            }

            requestAnimationFrame(updateSlide);
        }

        requestAnimationFrame(updateSlide);

    </script>

</body>
</html>
