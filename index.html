<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strang OS Controller</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;500&display=swap');

        body, html { 
            margin: 0; padding: 0; 
            width: 100%; height: 100%; 
            overflow: hidden; 
            background-color: #000; 
        }

        /* THE VIEWPORT */
        /* This iframe is always 300vw (3 screens wide) */
        #content-frame {
            position: absolute;
            top: 0;
            width: 300vw; 
            height: 100vh;
            border: none;
            overflow: hidden;
            transition: left 0s; /* Instant snapping */
        }

        /* UI OVERLAY - Lives permanently on top */
        .ui-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 999;
            pointer-events: none;
        }

        .corner-text {
            position: absolute;
            font-family: "Roboto Mono", monospace;
            font-size: 18px; 
            color: #ffffff; /* Global White Text */
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 500;
            display: none; 
            mix-blend-mode: difference; /* Ensures text is visible on white OR black backgrounds */
        }

        .top-left { top: 30px; left: 30px; }
        .bottom-left { bottom: 30px; left: 30px; }
        .top-right { top: 30px; right: 30px; text-align: right; }
        .bottom-right { bottom: 30px; right: 30px; text-align: right; }
    </style>
</head>
<body>

    <iframe id="content-frame"></iframe>

    <div class="ui-layer">
        <div class="corner-text top-left" id="ui-brand">STRANG.DESIGN</div>
        <div class="corner-text bottom-left" id="ui-city">MIAMI</div>
        <div class="corner-text top-right" id="timer">00:00:00</div>
        <div class="corner-text bottom-right" id="weather">LOADING...</div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const urlParams = new URLSearchParams(window.location.search);
        const screenID = (urlParams.get('screen') || 'center').toLowerCase().trim();
        
        // DEFAULT CONTENT FILE
        // You can change this via URL too: index.html?screen=center&file=strang_v2.html
        const fileToLoad = urlParams.get('file') || 'strang_logo.html'; 
        
        // 1. SETUP IFRAME (The Window Pane)
        const iframe = document.getElementById('content-frame');
        iframe.src = fileToLoad;

        function updateLayout() {
            // Shift the 300vw iframe based on which screen we are acting as
            if (screenID === 'left')   iframe.style.left = '0vw';
            if (screenID === 'center') iframe.style.left = '-100vw'; // Shift left by 1 screen
            if (screenID === 'right')  iframe.style.left = '-200vw'; // Shift left by 2 screens
        }

        // 2. SETUP UI (The HUD)
        function setupUI() {
            const brand = document.getElementById('ui-brand');
            const city = document.getElementById('ui-city');
            const timer = document.getElementById('timer');
            const weather = document.getElementById('weather');

            if (screenID === 'left') {
                brand.style.display = 'block';
                city.style.display = 'block';
            }
            if (screenID === 'right') {
                timer.style.display = 'block';
                weather.style.display = 'block';
            }
        }

        // 3. DATA FEEDS
        function updateTime() {
            const now = new Date();
            const estTime = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/New_York',
                hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'
            }).format(now);
            document.getElementById('timer').innerText = estTime + ":" + Math.floor(now.getMilliseconds()/100);
            requestAnimationFrame(updateTime);
        }

        async function fetchWeather() {
            try {
                const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=25.7617&longitude=-80.1918&current_weather=true&temperature_unit=fahrenheit');
                const data = await response.json();
                if (data.current_weather) {
                    document.getElementById('weather').innerText = `${Math.round(data.current_weather.temperature)}Â°F`;
                }
            } catch (e) {}
        }

        // INIT
        window.addEventListener('load', () => {
            updateLayout();
            setupUI();
            updateTime();
            fetchWeather();
        });
        window.addEventListener('resize', updateLayout);
    </script>
</body>
</html>
