<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seamless Timelapse</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { width: 100%; height: 100vh; overflow: hidden; background: #000; }

        /* Two players for seamless crossfading */
        .player {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0; /* Hidden by default */
            transition: opacity 1s ease; /* Smooth Crossfade */
        }
        
        .active { opacity: 1; z-index: 2; }
    </style>
</head>
<body>

    <video id="v1" class="player" muted playsinline></video>
    <video id="v2" class="player" muted playsinline></video>

    <script>
        const playlist = [
            "assets/strang_timelapses_1.mp4",
            "assets/strang_timelapses_2.mp4",
            "assets/strang_timelapses_3.mp4",
            "assets/strang_timelapses_4.mp4",
            "assets/strang_timelapses_5.mp4"
        ];

        let currentIdx = 0;
        let activePlayer = document.getElementById('v1');
        let nextPlayer = document.getElementById('v2');

        function playNext() {
            // Swap roles
            const temp = activePlayer;
            activePlayer = nextPlayer;
            nextPlayer = temp;

            // Load next video
            activePlayer.src = playlist[currentIdx];
            
            // --- SYNC MAGIC ---
            // If the video is long, screens might drift. 
            // This forces them to start at 0 together.
            activePlayer.currentTime = 0; 
            
            activePlayer.play().then(() => {
                // Once playing, fade it in
                activePlayer.classList.add('active');
                nextPlayer.classList.remove('active');

                // Prepare index for next loop
                currentIdx++;
                if (currentIdx >= playlist.length) currentIdx = 0;

            }).catch(e => console.error("Play error", e));
        }

        // Detect when current video ends to trigger the swap
        // We add listeners to BOTH players
        document.getElementById('v1').addEventListener('ended', playNext);
        document.getElementById('v2').addEventListener('ended', playNext);

        // --- INIT ---
        window.addEventListener('load', () => {
            // Start the loop
            playNext();
        });

    </script>
</body>
</html>
